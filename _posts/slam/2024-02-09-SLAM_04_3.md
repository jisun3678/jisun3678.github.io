---
layout: post
image: /assets/images/blog/post-5.jpg
title: "SLAM 4-3강 (Hierarchical Pose Graphs for SLAM) 요약"
categories:
    - SLAM
tags:
    - SLAM
toc: true
toc_sticky: true
comments: true
---


## 0. 오늘의 목표  

- Hierarchical Pose Graph란 무엇인가?  
- Hierarchical Pose Graph의 동작 방식  
- 장점과 주의사항  

---

## 1. 강의 및 자료 소개  

이번 강의는 SLAM에서 Hierarchical Pose Graph를 활용해 효율적인 최적화를 수행하는 방법을 다룹니다.  
참고 자료:  
- [Hierarchical Pose Graphs for SLAM (Cyrill Stachniss)](https://youtu.be/uRSow8nMEw8)  
- [강의 자료 PDF](https://drive.google.com/file/d/1v1WvsB2MCEIC2wwxVcVb-cNCIueM4vxo/view?usp=sharing)  

---

## 2. Hierarchical Pose Graph란?  

### 정의  
Hierarchical Pose Graph는 그래프 기반 SLAM에서 **노드와 엣지의 수를 계층적으로 줄여, 최적화를 더 빠르고 효율적으로 수행하기 위한 구조**입니다.  

<p align="center"><img src="https://user-images.githubusercontent.com/41863759/153527989-76fee06e-d680-4d32-8c0a-dad6a6926993.png" width="700"></p>  

- **Lower Level**: 자세한 노드와 엣지가 포함된 세밀한 그래프.  
- **Higher Level**: 중요한 노드와 엣지만을 남긴 간소화된 그래프.  

### 아이디어  
- 최적화는 노드와 엣지의 수가 적을수록 빠릅니다.  
- Global map 최적화 시, 모든 세부 데이터를 포함할 필요는 없습니다.  
- 새로운 관측(예: Loop Closing)이 있을 때, 인근 노드만 수정하여 효율적으로 처리합니다.  

---

## 3. Hierarchical Pose Graph의 동작 방식  

### 계층적 그래프 생성  

1. **Dense Graph 생성**  
   센서 데이터를 통해 하위 레벨의 세밀한 그래프를 생성합니다.  
   <p align="center"><img src="https://user-images.githubusercontent.com/41863759/153536557-6120e90a-f704-45a7-b4b9-43ffb7028884.png" width="300"></p>  

2. **Local Grouping**  
   로컬 연결성을 기준으로 노드 그룹화(예: 거리 기준).  
   <p align="center"><img src="https://user-images.githubusercontent.com/41863759/153536733-8920d8ef-247d-4b73-8d70-131c71f5a7be.png" width="340"></p>  

3. **Representative Node 설정**  
   각 그룹에서 대표 노드를 선택합니다.  
   <p align="center"><img src="https://user-images.githubusercontent.com/41863759/153537077-dd916215-a1ab-436f-82f3-400e8ae70953.png" width="340"></p>  

4. **Higher-Level Graph 생성**  
   대표 노드와 연결성을 기반으로 상위 계층의 그래프를 만듭니다.  
   <p align="center"><img src="https://user-images.githubusercontent.com/41863759/153537422-e6641b96-633a-4ac7-b08a-675f667d742c.png" width="300"></p>  

---

### 주요 작업  

1. **상위 계층 엣지 계산**  
   상위 계층에서는 직접적인 관측 대신, 하위 계층 노드 간의 정보를 결합해 엣지를 계산합니다.  

   #### 방법: 
   - 두 노드의 상대적 변환과 불확실성(Information Matrix $\Omega$)을 기반으로 엣지를 정의합니다.  
   - $H$ 행렬에서 불확실성 정보를 얻고, 이를 Inverse하여 $\Omega$를 계산합니다.  
   <p align="center"><img src="https://user-images.githubusercontent.com/41863759/153542533-5e6d1fd6-e0b8-4744-90c3-6d6035a761e2.png" width="300"></p>  

2. **최적화 결과 전파**  
   상위 계층에서 최적화된 결과를 하위 계층으로 전달합니다.  
   - 대표 노드의 이동 값을 하위 노드들에게 적용합니다.  
   - 하위 계층의 노드 간 거리 감소로 정렬 효과 발생.  
   <p align="center"><img src="https://user-images.githubusercontent.com/41863759/153543795-16e0ba03-e1fa-4ac7-b00d-91094ee986b9.png" width="330"></p>  

---

## 4. Hierarchical Pose Graph의 장점과 고려사항  

### 장점  

1. **최적화 속도 향상**  
   상위 계층의 간소화된 그래프를 사용하여 초기 최적화를 빠르게 수행.  

2. **계산량 감소**  
   모든 노드를 처리하지 않고, 필요한 부분만 최적화.  

3. **Global 수렴 속도 증가**  
   Lower level에서 더 나은 초기값을 설정 가능.  

### 주의사항  

- **Approximation으로 인한 불확실성 증가**  
   상위 계층의 그래프는 근사치이므로, 하위 계층과 차이가 발생합니다.  
   <p align="center"><img src="https://user-images.githubusercontent.com/41863759/153550235-a50e74a3-9a98-44f6-be22-d89bf537258a.png" width="600"></p>  

- **Motion Assumption**  
   로봇이 점진적으로 이동해야 효과적입니다.  

---

## 5. 요약  

Hierarchical Pose Graph는 SLAM에서 계산 효율성을 극대화하면서도 충분히 정확한 최적화를 수행할 수 있는 강력한 기법입니다.  

**핵심 개념**:  
1. 로컬 그룹화를 통해 그래프를 간소화.  
2. 상위 계층에서 초기 최적화 수행.  
3. 결과를 하위 계층으로 전파하여 전체 그래프를 정렬.  

계층 구조를 통해 SLAM의 성능을 최적화하는 방법은 실제 로봇 시스템에 적용될 가능성이 높으며, 향후 연구에서도 중요한 기초가 될 것입니다.
